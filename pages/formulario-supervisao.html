<div class="view-container" id="supervisao-view">
    <button id="form-view-back-button" class="secondary-action-button">&larr; Voltar</button>

    <div id="lista-acompanhamentos-container" style="display: none;">
        <div class="view-header-band"><h1>Meus Acompanhamentos</h1></div>
        <p class="page-subtitle">Visualize, filtre e acesse todas as fichas de acompanhamento vinculadas a você, seja como psicólogo(a) ou supervisor(a).</p>
        
        <div id="filtros-container" style="display: none;">
            <div class="filtro-grupo">
                <label for="filtro-paciente">Filtrar por Iniciais do Paciente:</label>
                <input type="text" id="filtro-paciente" placeholder="Digite as iniciais...">
            </div>
            <div class="filtro-grupo" id="filtro-supervisor-view" style="display: none;">
                <label for="filtro-psicologo">Filtrar por Profissional:</label>
                <select id="filtro-psicologo">
                    <option value="">Todos os Profissionais</option>
                </select>
            </div>
        </div>

        <div id="lista-registros"></div>
    </div>

    <div id="form-container">
        <div class="save-status-container"><span id="save-status"></span></div>
        <form id="ficha-supervisao">
            <input type="hidden" id="document-id" name="documentId">
            <div class="view-header-band"><h1>Ficha de Acompanhamento</h1></div>
            <div class="section-subtitle">Identificação Geral</div>
            <div class="form-group">
                <label for="supervisor-nome">Nome do supervisor(a):</label>
                <select id="supervisor-nome" name="supervisorNome" required><option value="">Carregando...</option></select>
            </div>
            <div class="form-row">
                <div class="form-group"><label for="supervisao-data">Data da supervisão:</label><input type="date" id="supervisao-data" name="supervisaoData"></div>
                <div class="form-group"><label for="terapia-inicio">Data de início da terapia:</label><input type="date" id="terapia-inicio" name="terapiaInicio"></div>
            </div>
            <div class="section-subtitle">1. Identificação do Psicólogo(a)</div>
            <div class="form-group">
                <label for="psicologo-nome">Nome do psicólogo (a):</label>
                <select id="psicologo-nome" name="psicologoNome" required><option value="">Carregando...</option></select>
            </div>
            <div class="form-row">
                 <div class="form-group"><label for="psicologo-periodo">Período/Semestre (estagiários):</label><input type="number" id="psicologo-periodo" name="psicologoPeriodo"></div>
                 <div class="form-group"><label for="psicologo-abordagem">Abordagem teórica:</label><input type="text" id="psicologo-abordagem" name="psicologoAbordagem"></div>
            </div>
            <div class="section-subtitle">2. Identificação do Caso (dados sigilosos)</div>
            <div class="form-group">
                <label for="paciente-iniciais">Iniciais do(a) paciente:</label>
                <input type="text" id="paciente-iniciais" name="pacienteIniciais" placeholder="Campo obrigatório para salvar">
            </div>
            <div class="form-row">
                <div class="form-group"><label for="paciente-idade">Idade:</label><input type="number" id="paciente-idade" name="pacienteIdade"></div>
                <div class="form-group"><label for="paciente-genero">Gênero:</label><input type="text" id="paciente-genero" name="pacienteGenero"></div>
                <div class="form-group"><label for="paciente-sessoes">Nº de sessões:</label><input type="number" id="paciente-sessoes" name="pacienteSessoes"></div>
            </div>
            <div class="form-group">
                <label for="paciente-apresentacao">Apresentação geral (queixa, demanda):</label>
                <textarea id="paciente-apresentacao" name="pacienteApresentacao" rows="3"></textarea>
            </div>
            <div class="section-title">FASE 1: INÍCIO DA TERAPIA (Sessões 1-8)</div>
            <div class="form-group"><label for="fase1-data">Data do preenchimento:</label><input type="date" id="fase1-data" name="fase1Data"></div>
            <div class="form-group"><label for="fase1-foco">Foco do atendimento:</label><textarea id="fase1-foco" name="fase1Foco" rows="3"></textarea></div>
            <div class="form-group"><label for="fase1-objetivos">Objetivos terapêuticos:</label><textarea id="fase1-objetivos" name="fase1Objetivos" rows="3"></textarea></div>
            <div class="form-group"><label for="fase1-hipoteses">Primeiras hipóteses diagnósticas:</label><textarea id="fase1-hipoteses" name="fase1Hipoteses" rows="3"></textarea></div>
            <div class="section-title">FASE 2: MEIO DA TERAPIA (Aprox. 3 meses)</div>
            <div class="form-group"><label for="fase2-data">Data do preenchimento:</label><input type="date" id="fase2-data" name="fase2Data"></div>
            <div class="form-group"><label for="fase2-reavaliacao">Reavaliação do foco:</label><textarea id="fase2-reavaliacao" name="fase2Reavaliacao" rows="3"></textarea></div>
            <div class="form-group"><label for="fase2-progresso">Progresso em direção aos objetivos:</label><textarea id="fase2-progresso" name="fase2Progresso" rows="3"></textarea></div>
            <div class="section-title">FASE 3: PROCESSO DE ALTA (5º e 6º mês)</div>
            <div class="form-group"><label for="fase3-data">Data do preenchimento:</label><input type="date" id="fase3-data" name="fase3Data"></div>
            <div class="form-group"><label for="fase3-avaliacao">Avaliação final dos objetivos:</label><textarea id="fase3-avaliacao" name="fase3Avaliacao" rows="3"></textarea></div>
            <div class="form-group"><label for="fase3-mudancas">Principais mudanças e aprendizados:</label><textarea id="fase3-mudancas" name="fase3Mudancas" rows="3"></textarea></div>
            <div class="section-subtitle">Observações Finais</div>
            <div class="form-group"><label for="obs-finais">Observações finais relevantes:</label><textarea id="obs-finais" name="obsFinais" rows="3"></textarea></div>
            <div class="form-group"><label for="data-alta">Data da alta:</label><input type="date" id="data-alta" name="dataAlta"></div>
            <div class="form-group"><label for="assinatura-supervisor">Assinatura do supervisor:</label><input type="text" id="assinatura-supervisor" name="assinaturaSupervisor"></div>
        </form>
        <button id="pdf-btn" class="action-button" style="display: none; background-color: #17a2b8; margin-top: 10px;">Exportar para PDF</button>
        <button id="delete-btn" class="secondary-button" style="display: none; background-color: #dc3545;">Excluir Acompanhamento</button>
    </div>
</div>
